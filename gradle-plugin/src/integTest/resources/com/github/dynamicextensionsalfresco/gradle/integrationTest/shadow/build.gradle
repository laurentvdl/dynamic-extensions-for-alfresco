plugins {
    id "eu.xenit.de"
    id "java"
    id "eu.xenit.alfresco" version "0.2.0"
    id 'com.github.johnrengelman.shadow' version '5.2.0'
}

repositories {
    mavenCentral()
    alfrescoPublic()
}

alfrescoDynamicExtensions {
    versions {
        dynamicExtensions = "2.0.5"
    }
}

dependencies {
    implementation "commons-io:commons-io:2.8.0"
    alfrescoProvided 'org.springframework:spring-context:3.2.14.RELEASE'
}

alfrescoDynamicExtensions.configureBundle(shadowJar)

shadowJar {
    relocate "org.apache.commons.io", "com.github.dynamicextensionsalfresco.examples.internal.shadow.commons.io"
    bnd([
        'Export-Package': 'com.github.dynamicextensionsalfresco.examples'
    ])
}

jar.enabled = false

assert tasks.named("installShadowBundle").isPresent()
